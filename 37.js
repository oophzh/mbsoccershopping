(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{j3zA:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),r=e("mrSG"),i=e("ZZ/e"),u=e("AwSQ"),a=e("8cFx"),o=e("cdBk"),c=e("Pn9U"),s=e("Yttj"),g=e("AytR"),m=function(){function n(n,l,e,t,r,i,u,a){var o=this;this.dataService=n,this.commonService=l,this.translate=e,this.nav=t,this.actionSheetController=r,this.camera=i,this.imagePicker=u,this.webview=a,this.firstName="",this.lastName="",this.genderList=[{name:"Female",value:"0",selected:!0},{name:"Male",value:"1",selected:!1}],this.currentGender=this.genderList[0],this.userLogo="/assets/images/default_user_head.png",this.translate.get(["LoginGenderFemale","LoginGenderMale","LoginSignIn","LoginSignUp"]).subscribe(function(n){o.genderList[0].name=n.LoginGenderFemale,o.genderList[1].name=n.LoginGenderMale})}return n.prototype.ngOnInit=function(){if(localStorage.userInfo){var n=JSON.parse(localStorage.userInfo);this.firstName=n.firstName,this.lastName=n.lastName,this.userLogo=this.commonService.picUrl+"usricon/"+n.usrico;for(var l=0;l<this.genderList.length;l++){var e=this.genderList[l];n.sex==e.value?(e.selected=!0,this.currentGender=e):e.selected=!1}}},n.prototype.selectedGender=function(n){for(var l=0;l<this.genderList.length;l++){var e=this.genderList[l];l==n?(e.selected=!0,this.currentGender=e):e.selected=!1}},n.prototype.changeUserInfo=function(){var n=this;if(this.firstName)if(this.lastName){var l=this;this.dataService.userInfoModify(this.firstName,this.lastName,this.currentGender.value,function(n){var e=JSON.parse(localStorage.userInfo);e.firstName=l.firstName,e.lastName=l.lastName,e.sex=l.currentGender.value,localStorage.userInfo=JSON.stringify(e),l.translate.get("CommonSuccess").subscribe(function(n){l.commonService.presentToast(n)}),l.commonService.gotoMine()},null)}else this.translate.get("LastNameNull").subscribe(function(l){n.commonService.presentToast(l)});else this.translate.get("FirstNameNull").subscribe(function(l){n.commonService.presentToast(l)})},n.prototype.changeHeaderImage=function(){g.a.isApp?this.showAvatarSheet():this.cameraInput.nativeElement.click()},n.prototype.showAvatarSheet=function(){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(l){switch(l.label){case 0:return n=this,[4,this.actionSheetController.create({buttons:[{text:"Camera",handler:function(){console.log("Camera"),n.takePicture()}},{text:"Gallery",handler:function(){console.log("Gallery"),n.choosePicture()}},{text:"Cancel",role:"cancel",handler:function(){console.log("Cancel clicked")}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.uploadImg=function(n){var l=this;if(this.commonService.isLogin()){var e=n.target.files;if(e&&e.length>0){var t=e[0];if(t.size>4194304)return void this.translate.get(["SettingChangeAvatarSizeHint","CommonCancel","CommonConfirm"]).subscribe(function(n){l.commonService.presentAlertConfirm("",n.SettingChangeAvatarSizeHint,n.CommonCancel,n.CommonConfirm,null,null)});l.dataService.updateUserImage(t,function(n){l.userLogo=l.commonService.picUrl+"usricon/"+n.data;var e=JSON.parse(localStorage.userInfo);e.usrico=n.data,localStorage.userInfo=JSON.stringify(e)},function(){l.commonService.presentToast("\u4e0a\u4f20\u5931\u8d25")})}}},n.prototype.takePicture=function(){var n=this;this.camera.getPicture({quality:100,sourceType:this.camera.PictureSourceType.CAMERA,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(l){console.log(l),l&&(n.userLogo=n.webview.convertFileSrc(l))},function(n){console.log("\u83b7\u53d6\u56fe\u7247\u5931\u8d25")})},n.prototype.choosePicture=function(){var n=this;this.imagePicker.getPictures({maximumImagesCount:1}).then(function(l){for(var e=0;e<l.length;e++)console.log("Image URI: "+l[e]),n.userLogo=n.webview.convertFileSrc(l[e])},function(n){console.log("\u83b7\u53d6\u56fe\u7247\u5931\u8d25")})},n}(),b=function(){return function(){}}(),d=e("pMnS"),h=e("oBZk"),p=e("Ip0R"),f=e("A7o+"),C=e("gIcY"),v=t.ob({encapsulation:0,styles:[[".user-header-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;padding:.5rem .2rem .5rem 0;color:#333;font-size:.7rem;margin-left:.8rem;border-bottom:1px solid #ccc}.user-header-wrap[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.user-header-wrap[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:2rem;height:2rem}.user-header-wrap[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#999;font-size:1rem;margin-left:.3rem}.avatar-hint[_ngcontent-%COMP%]{padding:.2rem .7rem;color:#999;font-size:.6rem}.upload-img[_ngcontent-%COMP%]{opacity:0;width:0;height:0;filter:alpha(opacity=0)}.name-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .name-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.7rem;color:#333}.change-btn[_ngcontent-%COMP%]{margin:.5rem;background:#ea5455;border-radius:3px;text-align:center;padding:.5rem;color:#fff;font-size:.7rem}.gender-item-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.6rem;margin-left:.8rem;border-bottom:1px solid #ccc;padding:.5rem 0}.gender-item-wrap[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.7rem;color:#333;margin-right:1rem}.gender-item-wrap[_ngcontent-%COMP%]   .gender-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.25rem 1rem .25rem 0}.gender-item-wrap[_ngcontent-%COMP%]   .gender-item[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:#ea5455}.gender-item-wrap[_ngcontent-%COMP%]   .gender-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8rem;margin-right:.25rem;color:#999}"]],data:{}});function y(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,7,"div",[["class","gender-item"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectedGender(n.context.index)&&t),t},null,null)),(n()(),t.qb(1,0,null,null,3,"ion-icon",[["name","checkmark-circle"]],null,null,null,h.P,h.j)),t.pb(2,278528,null,0,p.h,[t.s,t.t,t.k,t.E],{ngClass:[0,"ngClass"]},null),t.Db(3,{selected:0}),t.pb(4,49152,null,0,i.D,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.qb(5,0,null,null,2,"ion-label",[],null,null,null,h.W,h.q)),t.pb(6,49152,null,0,i.O,[t.h,t.k],null,null),(n()(),t.Ib(7,0,["",""]))],function(n,l){var e=n(l,3,0,l.context.$implicit.selected);n(l,2,0,e),n(l,4,0,"checkmark-circle")},function(n,l){n(l,7,0,l.context.$implicit.name)})}function I(n){return t.Kb(0,[t.Gb(402653184,1,{galleryInput:0}),t.Gb(402653184,2,{cameraInput:0}),(n()(),t.qb(2,0,null,null,12,"ion-header",[],null,null,null,h.O,h.i)),t.pb(3,49152,null,0,i.C,[t.h,t.k],null,null),(n()(),t.qb(4,0,null,0,10,"ion-toolbar",[],null,null,null,h.lb,h.F)),t.pb(5,49152,null,0,i.Cb,[t.h,t.k],null,null),(n()(),t.qb(6,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,h.K,h.e)),t.pb(7,49152,null,0,i.m,[t.h,t.k],null,null),(n()(),t.qb(8,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,l,e){var r=!0;return"click"===l&&(r=!1!==t.Ab(n,10).onClick(e)&&r),r},h.I,h.c)),t.pb(9,49152,null,0,i.h,[t.h,t.k],null,null),t.pb(10,16384,null,0,i.i,[[2,i.ib],i.Ib],null,null),(n()(),t.qb(11,0,null,0,3,"ion-title",[],null,null,null,h.kb,h.E)),t.pb(12,49152,null,0,i.Ab,[t.h,t.k],null,null),(n()(),t.Ib(13,0,["",""])),t.Cb(131072,f.i,[f.j,t.h]),(n()(),t.qb(15,0,null,null,55,"ion-content",[],null,null,null,h.L,h.f)),t.pb(16,49152,null,0,i.v,[t.h,t.k],null,null),(n()(),t.qb(17,0,null,0,9,"div",[["class","user-header-wrap"]],null,null,null,null,null)),(n()(),t.qb(18,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),t.Ib(19,null,["",""])),t.Cb(131072,f.i,[f.j,t.h]),(n()(),t.qb(21,0,null,null,5,"div",[["class","user-header"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.changeHeaderImage()&&t),t},null,null)),(n()(),t.qb(22,0,null,null,2,"ion-avatar",[],null,null,null,h.H,h.b)),t.pb(23,49152,null,0,i.g,[t.h,t.k],null,null),(n()(),t.qb(24,0,null,0,0,"img",[["onerror","javascript:this.src='/assets/images/default_image.png';"]],[[8,"src",4]],null,null,null,null)),(n()(),t.qb(25,0,null,null,1,"ion-icon",[["name","arrow-forward"]],null,null,null,h.P,h.j)),t.pb(26,49152,null,0,i.D,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.qb(27,0,null,0,2,"div",[["class","avatar-hint"]],null,null,null,null,null)),(n()(),t.Ib(28,null,["",""])),t.Cb(131072,f.i,[f.j,t.h]),(n()(),t.qb(30,0,null,0,14,"ion-item",[["class","name-item"]],null,null,null,h.V,h.n)),t.pb(31,49152,null,0,i.I,[t.h,t.k],null,null),(n()(),t.qb(32,0,null,0,3,"ion-label",[["position","floating"]],null,null,null,h.W,h.q)),t.pb(33,49152,null,0,i.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Ib(34,0,["",""])),t.Cb(131072,f.i,[f.j,t.h]),(n()(),t.qb(36,0,null,0,8,"ion-input",[["clearInput",""],["name","firstname"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var r=!0,i=n.component;return"ionBlur"===l&&(r=!1!==t.Ab(n,39)._handleBlurEvent()&&r),"ionChange"===l&&(r=!1!==t.Ab(n,39)._handleInputEvent(e.target.value)&&r),"ngModelChange"===l&&(r=!1!==(i.firstName=e)&&r),r},h.S,h.m)),t.pb(37,16384,null,0,C.k,[],{required:[0,"required"]},null),t.Fb(1024,null,C.f,function(n){return[n]},[C.k]),t.pb(39,16384,null,0,i.Pb,[t.k],null,null),t.Fb(1024,null,C.g,function(n){return[n]},[i.Pb]),t.pb(41,671744,null,0,C.j,[[8,null],[6,C.f],[8,null],[6,C.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Fb(2048,null,C.h,null,[C.j]),t.pb(43,16384,null,0,C.i,[[4,C.h]],null,null),t.pb(44,49152,null,0,i.H,[t.h,t.k],{clearInput:[0,"clearInput"],name:[1,"name"],required:[2,"required"]},null),(n()(),t.qb(45,0,null,0,14,"ion-item",[["class","name-item"]],null,null,null,h.V,h.n)),t.pb(46,49152,null,0,i.I,[t.h,t.k],null,null),(n()(),t.qb(47,0,null,0,3,"ion-label",[["position","floating"]],null,null,null,h.W,h.q)),t.pb(48,49152,null,0,i.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Ib(49,0,["",""])),t.Cb(131072,f.i,[f.j,t.h]),(n()(),t.qb(51,0,null,0,8,"ion-input",[["clearInput",""],["name","lastname"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var r=!0,i=n.component;return"ionBlur"===l&&(r=!1!==t.Ab(n,54)._handleBlurEvent()&&r),"ionChange"===l&&(r=!1!==t.Ab(n,54)._handleInputEvent(e.target.value)&&r),"ngModelChange"===l&&(r=!1!==(i.lastName=e)&&r),r},h.S,h.m)),t.pb(52,16384,null,0,C.k,[],{required:[0,"required"]},null),t.Fb(1024,null,C.f,function(n){return[n]},[C.k]),t.pb(54,16384,null,0,i.Pb,[t.k],null,null),t.Fb(1024,null,C.g,function(n){return[n]},[i.Pb]),t.pb(56,671744,null,0,C.j,[[8,null],[6,C.f],[8,null],[6,C.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Fb(2048,null,C.h,null,[C.j]),t.pb(58,16384,null,0,C.i,[[4,C.h]],null,null),t.pb(59,49152,null,0,i.H,[t.h,t.k],{clearInput:[0,"clearInput"],name:[1,"name"],required:[2,"required"]},null),(n()(),t.qb(60,0,null,0,6,"div",[["class","gender-item-wrap"]],null,null,null,null,null)),(n()(),t.qb(61,0,null,null,3,"ion-label",[["class","label"]],null,null,null,h.W,h.q)),t.pb(62,49152,null,0,i.O,[t.h,t.k],null,null),(n()(),t.Ib(63,0,["",""])),t.Cb(131072,f.i,[f.j,t.h]),(n()(),t.hb(16777216,null,null,1,null,y)),t.pb(66,278528,null,0,p.i,[t.P,t.M,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.qb(67,0,[[2,0],["cameraInput",1]],0,0,"input",[["accept","image/jpg,image/gif,image/png,image/jpeg"],["class","upload-img"],["type","file"]],null,[[null,"change"]],function(n,l,e){var t=!0;return"change"===l&&(t=!1!==n.component.uploadImg(e)&&t),t},null,null)),(n()(),t.qb(68,0,null,0,2,"div",[["class","change-btn"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.changeUserInfo()&&t),t},null,null)),(n()(),t.Ib(69,null,["",""])),t.Cb(131072,f.i,[f.j,t.h])],function(n,l){var e=l.component;n(l,26,0,"arrow-forward"),n(l,33,0,"floating"),n(l,37,0,""),n(l,41,0,"firstname",e.firstName),n(l,44,0,"","firstname",""),n(l,48,0,"floating"),n(l,52,0,""),n(l,56,0,"lastname",e.lastName),n(l,59,0,"","lastname",""),n(l,66,0,e.genderList)},function(n,l){var e=l.component;n(l,13,0,t.Jb(l,13,0,t.Ab(l,14).transform("SettingChangeUserInfo"))),n(l,19,0,t.Jb(l,19,0,t.Ab(l,20).transform("SettingAvatar"))),n(l,24,0,e.userLogo),n(l,28,0,t.Jb(l,28,0,t.Ab(l,29).transform("SettingChangeAvatarHint"))),n(l,34,0,t.Jb(l,34,0,t.Ab(l,35).transform("SettingFirstName"))),n(l,36,0,t.Ab(l,37).required?"":null,t.Ab(l,43).ngClassUntouched,t.Ab(l,43).ngClassTouched,t.Ab(l,43).ngClassPristine,t.Ab(l,43).ngClassDirty,t.Ab(l,43).ngClassValid,t.Ab(l,43).ngClassInvalid,t.Ab(l,43).ngClassPending),n(l,49,0,t.Jb(l,49,0,t.Ab(l,50).transform("SettingLastName"))),n(l,51,0,t.Ab(l,52).required?"":null,t.Ab(l,58).ngClassUntouched,t.Ab(l,58).ngClassTouched,t.Ab(l,58).ngClassPristine,t.Ab(l,58).ngClassDirty,t.Ab(l,58).ngClassValid,t.Ab(l,58).ngClassInvalid,t.Ab(l,58).ngClassPending),n(l,63,0,t.Jb(l,63,0,t.Ab(l,64).transform("LoginGender"))),n(l,69,0,t.Jb(l,69,0,t.Ab(l,70).transform("CommonSave")))})}function k(n){return t.Kb(0,[(n()(),t.qb(0,0,null,null,1,"app-change-user-info",[],null,null,null,I,v)),t.pb(1,114688,null,0,m,[u.a,a.a,f.j,i.Ib,i.a,c.a,o.a,s.a],null,null)],function(n,l){n(l,1,0)},null)}var P=t.mb("app-change-user-info",m,k,{},{},[]),S=e("ZYCi");e.d(l,"ChangeUserInfoPageModuleNgFactory",function(){return q});var q=t.nb(b,[],function(n){return t.xb([t.yb(512,t.j,t.cb,[[8,[d.a,P]],[3,t.j],t.x]),t.yb(4608,p.l,p.k,[t.u,[2,p.r]]),t.yb(4608,C.m,C.m,[]),t.yb(4608,i.c,i.c,[t.z,t.g]),t.yb(4608,i.Hb,i.Hb,[i.c,t.j,t.q,p.c]),t.yb(4608,i.Mb,i.Mb,[i.c,t.j,t.q,p.c]),t.yb(1073742336,p.b,p.b,[]),t.yb(1073742336,C.l,C.l,[]),t.yb(1073742336,C.c,C.c,[]),t.yb(1073742336,i.Eb,i.Eb,[]),t.yb(1073742336,S.o,S.o,[[2,S.u],[2,S.m]]),t.yb(1073742336,f.g,f.g,[]),t.yb(1073742336,b,b,[]),t.yb(1024,S.k,function(){return[[{path:"",component:m}]]},[])])})}}]);